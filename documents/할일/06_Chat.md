# Chat 기능 요구사항 정의서

> 반려동물 용품 중고거래 서비스 - **Chat** 영역 기능 정리

---

## 목록

- [FR-024 채팅방 목록 조회](#fr-024)
- [FR-025 채팅방 생성](#fr-025)
- [FR-026 채팅 전송](#fr-026)
- [FR-027 채팅방 삭제](#fr-027)
- [FR-028 채팅 내역 조회](#fr-028)

---

## FR-024 채팅방 목록 조회

<a id="fr-024"></a>

- **요구사항 ID:** `FR-024`
- **대분류:** Chat
- **HTTP:** `GET`
- **구분:** 기능
- **우선순위:** 상

### 설명
- 사용자는 자신이 참여 중인 채팅방 목록을 조회할 수 있습니다.
- • 목록은 최근 메시지 순으로 정렬되어 표시됩니다.
- • 각 채팅방에는 다음 정보가 포함됩니다.
- ◦ 상대방 닉네임
- ◦ 상대방 프로필 이미지
- ◦ 상품 이미지
- ◦ 상품 제목
- ◦ 상품 가격
- ◦ 최근 메시지 내용
- ◦ 최근 메시지 시간
- ◦ 읽음 여부

### 비고
- 로그인 필요
- - 채팅창은 모달이 아니라 페이지로 진행
- - 모바일에서는 채팅창 목록만 보였다가,
- 채팅창 클릭하면 특정 채팅방으로 이동
- - 읽음 여부 처리시 Redis 조회

---

## FR-025 채팅방 생성

<a id="fr-025"></a>

- **요구사항 ID:** `FR-025`
- **대분류:** Chat
- **HTTP:** `POST`
- **구분:** 기능
- **우선순위:** 상

### 설명
- 사용자는 상품 상세페이지 및 상대유저  조회 페이지에서 1대1 채팅방을 생성할수있습니다.

### 비고
- 로그인 필요
- - 유저 프로필 페이지에서는 채팅하기 버튼은 없다.

---

## FR-026 채팅 전송

<a id="fr-026"></a>

- **요구사항 ID:** `FR-026`
- **대분류:** Chat
- **HTTP:** `POST`
- **구분:** 기능
- **우선순위:** 상

### 설명
- 사용자가 자신이 속해있는 채팅방에 메시지를 적어 판매자에게 전송할 수 있다.

### 비고
- 로그인 필요
- - 전송 시
- 택스트 외에 이미지 파일을 전송할 수 있도록 한다.
- 메시지 최대 작성 가능 길이 (띄어쓰기 포함 1000자)
- 개인정보가 포함된 메시지는 전송되지 않는다.
- → 이때 안내 메시지 및 전송되지 못 한 메시지는 나에게만 보이는 메시지라는 안내를 함께 띄워주어야만 합니다. (안내메시지(사유) 및 전송되지 못 한 메시지에 모두 표시되어야만 함) ⇒ 디코 스크린 캡쳐 참고

---

## FR-027 채팅방 삭제

<a id="fr-027"></a>

- **요구사항 ID:** `FR-027`
- **대분류:** Chat
- **HTTP:** `DELETE`
- **구분:** 기능
- **우선순위:** 상

### 설명
- 사용자가 자신이 속한 채팅방을 삭제 할수있다.
- 삭제 시 채팅방에 속한 모든 메시지도 함께 삭제된다
- - 상대방은 이전 메시지를 확인할 수 있다.
- - 실제 ChatRoom과 ChatMessage 데이터는 유지되며, 사용자별 관계(ChatRoomUser)만 삭제 혹은 비활성화 처리된다.

### 비고
- - 로그인 필요
- - 사용자는 자신이 속한 채팅방을 삭제할 수 있다.
- - 삭제 시, 해당 사용자의 채팅방 목록에서 완전히 사라진다.
- - 삭제 이후에는 상대방의 채팅방의 채팅전송 버튼은 비활성화되며, 채팅창에는 “ㅁㅁ님이 채팅방을 나가셨습니다.” 라는 안내문구를 띄운다.

---

## FR-028 채팅 내역 조회

<a id="fr-028"></a>

- **요구사항 ID:** `FR-028`
- **대분류:** Chat
- **HTTP:** `GET`
- **구분:** 기능
- **우선순위:** 상

### 설명
- 사용자는 채팅방에 진입했을 때
- 해당 채팅방의 과거 메시지 내역을 조회할 수 있습니다.
- • 메시지는 작성 시각 기준 오름차순으로 정렬됩니다.
- • 각 메시지 항목에는 텍스트 내용과 보낸 시각이 함께 표시됩니다.

### 비고
- 로그인한 사용자만 자신의 채팅방 내역을 조회 가능
- • 페이지네이션 또는 무한 스크롤 방식 적용
- ◦ 예: 최신 50개씩 로드하여 이어보기 가능

---
