spring.application.name=cmarket_api

# JWT 설정 (보안: 환경 변수로 관리 필수)
# ⚠️ CRITICAL: 운영 환경에서는 반드시 환경 변수로 주입해야 합니다.
# HS256 알고리즘에 적합한 32바이트 이상의 임의 문자열 사용
jwt.secret=${JWT_SECRET:your-secret-key-must-be-at-least-256-bits-long-for-hmac-sha-algorithms-please-change-this-in-production}
jwt.access-token-validity-in-seconds=21600
jwt.refresh-token-validity-in-seconds=604800

# 이메일 설정
# 운영 환경: 실제 SMTP 서버 설정 필요
# spring.mail.host=smtp.gmail.com
# spring.mail.port=587
# spring.mail.username=${MAIL_USERNAME:your-email@gmail.com}
# spring.mail.password=${MAIL_PASSWORD:your-app-password}
# spring.mail.properties.mail.smtp.auth=true
# spring.mail.properties.mail.smtp.starttls.enable=true

# H2 (파일 기반 - 서버 재시작 시에도 데이터 유지)
# Docker 볼륨 마운트 경로로 변경
spring.datasource.url=jdbc:h2:file:/data/cmarket;DB_CLOSE_DELAY=-1
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

spring.h2.console.enabled=false
spring.h2.console.path=/h2-console

# JPA
# 운영 환경에서는 validate 또는 none 고려
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# SQL 초기화 설정
# 배포 환경에서는 never로 변경 권장 (초기 데이터 구축 완료 후)
spring.sql.init.mode=never
spring.jpa.defer-datasource-initialization=false

# OAuth2
# ⚠️ CRITICAL: Client Secret이 코드에 노출되면 보안 사고로 이어질 수 있습니다.
# 반드시 환경 변수로 관리하거나 배포 시에만 주입해야 합니다.
# Google OAuth2
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:13269763480-a40nju0rfr3qu3hjgg13b4j010k6562c.apps.googleusercontent.com}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET: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}
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}

# Kakao OAuth2
spring.security.oauth2.client.registration.kakao.client-id=${KAKAO_CLIENT_ID:your-kakao-client-id}
spring.security.oauth2.client.registration.kakao.client-secret=${KAKAO_CLIENT_SECRET:your-kakao-client-secret}
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.kakao.redirect-uri={baseUrl}/login/oauth2/code/{registrationId}
spring.security.oauth2.client.registration.kakao.scope=profile_nickname
spring.security.oauth2.client.registration.kakao.client-name=Kakao
spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token
spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me
spring.security.oauth2.client.provider.kakao.user-name-attribute=id

# OAuth2 리다이렉트 URL (환경 변수로 관리, 기본값은 기존 값 유지)
# Docker 배포: 환경 변수 OAUTH2_REDIRECT_URI로 설정
oauth2.redirect-uri=${OAUTH2_REDIRECT_URI:http://localhost:5173/oauth-redirect}

# 이미지 업로드 설정 (Docker 볼륨 마운트 경로)
# Dockerfile: RUN mkdir -p /data/uploads/images
# docker-compose.yml: - ./uploads:/data/uploads
# 경로 확인: /data/uploads/images (docker-compose.yml의 /data/uploads와 일치)
app.image.upload-dir=/data/uploads/images
app.image.base-url=/api/images
# 서버의 완전한 URL (환경 변수로 관리, 기본값은 기존 값 유지)
# 로컬 개발: http://localhost:8080
# 네트워크 접근: http://192.168.45.25:8080
# Docker 배포: 환경 변수 APP_IMAGE_SERVER_URL로 설정
app.image.server-url=${APP_IMAGE_SERVER_URL:http://localhost:8080}

# 멀티파트 업로드 제한
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# Redis 설정 (Docker Compose 서비스 이름으로 변경)
# EC2에서 직접 실행 시 localhost로 변경
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
# spring.data.redis.password=${REDIS_PASSWORD:}  # 운영 환경에서 설정

# 채팅 관련 설정
chat.redis.ttl-days=30

